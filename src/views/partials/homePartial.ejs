<%- include("navBar.ejs", { 
  isClassicComplete:  flags.isClassicComplete,
  isQuoteComplete:    flags.isQuoteComplete,
  isAbilityComplete:  flags.isAbilityComplete,
  isSplashComplete:   flags.isSplashComplete,
  isEmojiComplete:    flags.isEmojiComplete,
}) %>

<section id="home">
  <div class="max-w-3xl mx-auto px-4 py-6 backdrop-blur-4xl bg-[#191222]/70 rounded-2xl">
    <!-- Hero Section -->
    <div class="flex flex-col items-center justify-center mb-8 px-4">
      <h1 class="text-4xl font-bold text-center text-[#abcde3] mb-3 tracking-tight">
        <span class="text-gradient">Pick a Challenge</span>
      </h1>
      <p class="text-[#f5f5f7] text-center max-w-lg mb-6">
        Test your League of Legends knowledge with five unique champion guessing games.
        Complete all challenges to prove your knowledge.
      </p>

      <!-- Progress Bar -->
      <div class="w-full max-w-md mb-2">
        <div class="flex justify-between text-xs text-[#abcde3] mb-1">
          <span>Your Progress</span>
          <span id="progress-percentage">0%</span>
        </div>
        <div class="h-2 w-full bg-[#1e1e2e] rounded-full overflow-hidden">
          <div id="progress-bar" class="h-full bg-gradient-to-r from-[#4b6bac] to-[#20b2aa] rounded-full transition-all duration-1000 ease-out" style="width: 0%"></div>
        </div>
      </div>
    </div>

    <!-- Game Modes Grid -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 px-4">
      <!-- Classic -->
      <a href="/classic" class="game-card-link" data-mode="classic">
        <div class="game-card bg-[#1e1e2e] border border-[#45475a] hover:border-[#4b6bac] rounded-xl p-4 transition-all duration-300 hover:shadow-glow hover:transform hover:scale-[1.02] relative overflow-hidden">
          <div class="absolute top-0 right-0 w-24 h-24 bg-gradient-to-br from-[#4b6bac]/10 to-transparent rounded-bl-full"></div>

          <div class="flex items-start">
            <div class="game-icon-container mr-4 bg-[#191222] p-3 rounded-lg">
              <svg class="game-icon" width='36' height='36' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'>
                <path d="M 9 3 C 7.895 3 7 3.895 7 5 L 7 19 C 7 20.105 7.895 21 9 21 L 19 21 C 20.105 21 21 20.105 21 19 L 21 5 C 21 3.895 20.105 3 19 3 L 9 3 z M 3 4 L 3 20 L 5 20 L 5 4 L 3 4 z M 14 6 C 16.504 6 18 8.034 18 10 C 18 11.816 16.858391 12.840891 16.025391 13.587891 C 15.370391 14.176891 15 14.532 15 15 L 13 15 C 13 13.617 13.936453 12.775609 14.689453 12.099609 C 15.501453 11.370609 16 10.879 16 10 C 16 9.227 15.457 8 14 8 C 12.602 8 12 9.518 12 10 L 10 10 C 10 8.564 11.337 6 14 6 z M 13 16 L 15 16 L 15 18 L 13 18 L 13 16 z" />
              </svg>
            </div>
            <div class="flex-1">
              <h2 class="text-2xl font-bold text-[#f5f5f7] mb-1 group-hover:text-white">Classic</h2>
              <p class="text-sm text-[#abcde3] mb-3">Compare champion attributes and guess who matches all criteria.</p>
              <div class="flex items-center justify-between">
                <% if (flags.isClassicComplete) { %>
                <span class="completion-badge">Completed</span>
                <% } %>
              </div>
            </div>
          </div>
        </div>
      </a>

      <!-- Quote -->
      <a href="/quote" class="game-card-link" data-mode="quote">
        <div class="game-card bg-[#1e1e2e] border border-[#45475a] hover:border-[#4b6bac] rounded-xl p-4 transition-all duration-300 hover:shadow-glow hover:transform hover:scale-[1.02] relative overflow-hidden">
          <div class="absolute top-0 right-0 w-24 h-24 bg-gradient-to-br from-[#4b6bac]/10 to-transparent rounded-bl-full"></div>

          <div class="flex items-start">
            <div class="game-icon-container mr-4 bg-[#191222] p-3 rounded-lg">
              <svg class="game-icon" width='36' height='36' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'>
                <path d="M 3.9980469 3 C 2.8980469 3 2.0097656 3.9 2.0097656 5 L 2 16.998047 C 2 18.103047 2.895 19 4 19 L 5.9980469 19 L 6 19 L 6 23 L 9.9980469 19 L 19.998047 19 C 21.098047 19 21.998047 18.1 21.998047 17 L 21.998047 5 C 21.998047 3.9 21.098047 3 19.998047 3 L 3.9980469 3 z M 7 8 L 11 8 L 11 11 L 11 12 L 9 15 L 7 15 L 9 12 L 7 12 L 7 8 z M 13 8 L 17 8 L 17 11 L 17 12 L 15 15 L 13 15 L 15 12 L 13 12 L 13 8 z" />
              </svg>
            </div>
            <div class="flex-1">
              <h2 class="text-2xl font-bold text-[#f5f5f7] mb-1 group-hover:text-white">Quote</h2>
              <p class="text-sm text-[#abcde3] mb-3">Identify champions by their iconic voice lines and quotes.</p>
              <div class="flex items-center justify-between">
                <% if (flags.isQuoteComplete) { %>
                <span class="completion-badge">Completed</span>
                <% } %>
              </div>
            </div>
          </div>
        </div>
      </a>

      <!-- Ability -->
      <a href="/ability" class="game-card-link" data-mode="ability">
        <div class="game-card bg-[#1e1e2e] border border-[#45475a] hover:border-[#4b6bac] rounded-xl p-4 transition-all duration-300 hover:shadow-glow hover:transform hover:scale-[1.02] relative overflow-hidden">
          <div class="absolute top-0 right-0 w-24 h-24 bg-gradient-to-br from-[#4b6bac]/10 to-transparent rounded-bl-full"></div>

          <div class="flex items-start">
            <div class="game-icon-container mr-4 bg-[#191222] p-3 rounded-lg">
              <svg class="game-icon" width='36' height='36' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'>
                <path d="M 21.26 16.87 C 19.860000000000003 16.87 19.26 16.23 19.26 14.870000000000001 C 19.26 14.593857625084604 19.0361423749154 14.370000000000001 18.76 14.370000000000001 C 18.483857625084603 14.370000000000001 18.26 14.593857625084604 18.26 14.870000000000001 C 18.26 16.240000000000002 17.64 16.87 16.26 16.87 C 15.986174652202337 16.880746434286596 15.769789206118528 17.105963939394236 15.770000000000001 17.380000000000003 C 15.775445670797163 17.65222935009499 15.99771619325151 17.87005446210025 16.270000000000003 17.87 C 16.690000000000005 17.87 18.270000000000003 17.77 18.270000000000003 19.87 C 18.270000000000003 20.1461423749154 18.493857625084605 20.37 18.770000000000003 20.37 C 19.0461423749154 20.37 19.270000000000003 20.1461423749154 19.270000000000003 19.87 C 19.390000000000004 17.470000000000002 21.270000000000003 17.87 21.270000000000003 17.87 C 21.542283806748497 17.87005446210025 21.76455432920284 17.65222935009499 21.770000000000003 17.380000000000003 C 21.770000000000003 17.244739590181833 21.71626801141364 17.11501909460336 21.620624458405143 17.01937554159486 C 21.524980905396646 16.923731988586365 21.39526040981817 16.87 21.26 16.87 Z M 10.26 5.85 C 7.51 5.85 6.26 4.529999999999999 6.26 1.8499999999999996 C 6.250096310143799 1.5763655094997613 6.033384753749409 1.3553197219774837 5.76 1.3399999999999996 C 5.483857625084603 1.3399999999999996 5.26 1.5638576250846028 5.26 1.8399999999999996 C 5.26 4.619999999999999 3.8899999999999997 5.84 1.2599999999999998 5.84 C 0.9861746522023365 5.850746434286596 0.7697892061185274 6.075963939394234 0.7699999999999998 6.35 C 0.7699725694726611 6.481707392769062 0.822967871050915 6.607880572133663 0.9170349840166847 6.700066342840117 C 1.0111020969824542 6.792252113546572 1.1383200349018159 6.8426879088896335 1.2699999999999996 6.84 C 3.96 6.84 5.27 8.1 5.27 10.84 C 5.27544567079716 11.11222935009499 5.497716193251506 11.330054462100248 5.77 11.33 C 6.036860517302661 11.335667343699706 6.259165450170641 11.126700706803806 6.27 10.86 C 6.409999999999999 8.04 7.7299999999999995 6.859999999999999 10.27 6.859999999999999 C 10.401679965098182 6.862687908889633 10.528897903017546 6.812252113546571 10.622965015983315 6.720066342840116 C 10.717032128949084 6.627880572133662 10.770027430527339 6.501707392769061 10.77 6.369999999999999 C 10.772686492457655 6.233015354511598 10.720142835611 6.100710953990561 10.624206555609646 6.0028935704597695 C 10.528270275608293 5.905076186928977 10.397010983674575 5.84997365928179 10.26 5.85 Z M 21.45 10.93 C 22.603532875410767 9.77825419421185 23.251731336120365 8.215078677795653 23.251731336120365 6.584999999999999 C 23.25173133612036 4.954921322204345 22.603532875410767 3.3917458057881475 21.45 2.2399999999999984 C 19.937292511639875 0.7187429267571845 17.590176681671938 0.4060785848934234 15.731987514990397 1.4782912732437588 C 13.873798348308856 2.550503961594094 12.969931879430897 4.7390507663020145 13.530000000000001 6.810000000000003 C 13.85436374471223 7.77135739081432 14.870723716286346 8.31440220901343 15.850184607871752 8.049683049125484 C 16.829645499457158 7.784963889237536 17.434075477986912 6.803867733172514 17.23 5.8100000000000005 C 17.141895971098574 5.496657425961141 17.22984391294173 5.16016095282212 17.46 4.930000000000001 C 17.82215376993013 4.5883927463882275 18.387846230069872 4.588392746388228 18.75 4.930000000000001 C 19.18785140635018 5.365446023506496 19.434036980858064 5.957483122959015 19.434036980858064 6.575 C 19.434036980858064 7.192516877040985 19.18785140635018 7.784553976493504 18.75 8.219999999999999 C 17.90604274695352 9.027661747903068 16.734636232457323 9.397190616829313 15.579999999999998 9.22 C 13.715814335783785 8.970885172637594 11.84784812143301 9.650824874661277 10.580000000000004 11.039999999999997 C 9.642927083245347 11.971755186664497 8.922535246068986 13.098434363291034 8.469999999999999 14.340000000000002 C 7.540000000000001 16.85 4.870000000000001 19.52 2.8000000000000007 21.34 C 2.4186612803892764 21.66902716493332 2.341538009021434 22.230313195443724 2.6200000000000006 22.65 C 2.89495719913688 23.06316952596977 3.4313389191504706 23.212164448195768 3.88 23 L 3.88 23 C 10.8 19.56 11.43 17.56 11.879999999999999 16.09 C 12.155181433182506 15.11303058220716 12.699161501835933 14.232960916997156 13.449999999999998 13.550000000000002 C 13.86441102989845 13.158524694661134 14.436872857918393 12.981246193080764 15 13.07 C 17.366801440544812 13.40956165604489 19.755579131820088 12.6170059569241 21.449999999999996 10.930000000000003 Z" />
              </svg>
            </div>
            <div class="flex-1">
              <h2 class="text-2xl font-bold text-[#f5f5f7] mb-1 group-hover:text-white">Ability</h2>
              <p class="text-sm text-[#abcde3] mb-3">Recognize champions by their unique ability icons.</p>
              <div class="flex items-center justify-between">
                <% if (flags.isAbilityComplete) { %>
                <span class="completion-badge">Completed</span>
                <% } %>
              </div>
            </div>
          </div>
        </div>
      </a>

      <!-- Emoji -->
      <a href="/emoji" class="game-card-link" data-mode="emoji">
        <div class="game-card bg-[#1e1e2e] border border-[#45475a] hover:border-[#4b6bac] rounded-xl p-4 transition-all duration-300 hover:shadow-glow hover:transform hover:scale-[1.02] relative overflow-hidden">
          <div class="absolute top-0 right-0 w-24 h-24 bg-gradient-to-br from-[#4b6bac]/10 to-transparent rounded-bl-full"></div>

          <div class="flex items-start">
            <div class="game-icon-container mr-4 bg-[#191222] p-3 rounded-lg">
              <svg class="game-icon" id='Anime_Emoji_36' width='36' height='36' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'>
                <rect width='36' height='36' stroke='none' fill='#000000' opacity='0' />
                <g transform="matrix(1 0 0 1 12 12)">
                  <path transform=" translate(-12, -12)" d="M 12 2 C 6.477 2 2 6.477 2 12 C 2 17.523 6.477 22 12 22 C 17.523 22 22 17.523 22 12 C 22 6.477 17.523 2 12 2 z M 12 4 C 16.418 4 20 7.582 20 12 C 20 16.418 16.418 20 12 20 C 7.582 20 4 16.418 4 12 C 4 7.582 7.582 4 12 4 z M 8.5 9 C 7.11 9 6 10.12 6 11.5 C 6 12.88 7.11 14 8.5 14 C 9.89 14 11 12.88 11 11.5 C 11 10.12 9.89 9 8.5 9 z M 15.5 9 C 14.11 9 13 10.12 13 11.5 C 13 12.88 14.11 14 15.5 14 C 16.89 14 18 12.88 18 11.5 C 18 10.12 16.89 9 15.5 9 z M 8 10 C 8.55 10 9 10.45 9 11 C 9 11.55 8.55 12 8 12 C 7.45 12 7 11.55 7 11 C 7 10.45 7.45 10 8 10 z M 15 10 C 15.55 10 16 10.45 16 11 C 16 11.55 15.55 12 15 12 C 14.45 12 14 11.55 14 11 C 14 10.45 14.45 10 15 10 z M 9.5 12 C 9.78 12 10 12.22 10 12.5 C 10 12.78 9.78 13 9.5 13 C 9.22 13 9 12.78 9 12.5 C 9 12.22 9.22 12 9.5 12 z M 16.5 12 C 16.78 12 17 12.22 17 12.5 C 17 12.78 16.78 13 16.5 13 C 16.22 13 16 12.78 16 12.5 C 16 12.22 16.22 12 16.5 12 z M 9 16 C 9.47 17.166 10.632 18 12 18 C 13.368 18 14.53 17.166 15 16 L 9 16 z" stroke-linecap="round" />
                </g>
              </svg>
            </div>
            <div class="flex-1">
              <h2 class="text-2xl font-bold text-[#f5f5f7] mb-1 group-hover:text-white">Emoji</h2>
              <p class="text-sm text-[#abcde3] mb-3">Decode emoji sequences that represent champion stories.</p>
              <div class="flex items-center justify-between">
                <% if (flags.isEmojiComplete) { %>
                <span class="completion-badge">Completed</span>
                <% } %>
              </div>
            </div>
          </div>
        </div>
      </a>

      <!-- Splash -->
      <a href="/splash" class="game-card-link" data-mode="splash">
        <div class="game-card bg-[#1e1e2e] border border-[#45475a] hover:border-[#4b6bac] rounded-xl p-4 transition-all duration-300 hover:shadow-glow hover:transform hover:scale-[1.02] relative overflow-hidden">
          <div class="absolute top-0 right-0 w-24 h-24 bg-gradient-to-br from-[#4b6bac]/10 to-transparent rounded-bl-full"></div>

          <div class="flex items-start">
            <div class="game-icon-container mr-4 bg-[#191222] p-3 rounded-lg">
              <svg class="game-icon" width='36' height='36' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'>
                <rect width='24' height='24' stroke='none' fill='#000000' opacity='0' />
                <g transform="matrix(0.77 0 0 0.77 12 12)">
                  <path style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-dashoffset: 0; stroke-linejoin: miter; stroke-miterlimit: 4; fill-rule: nonzero; opacity: 1;" transform=" translate(-16, -16)" d="M 3 6 L 3 26 L 29 26 L 29 6 Z M 5 8 L 27 8 L 27 21.5625 L 19.21875 13.78125 L 18.5 13.09375 L 17.78125 13.78125 L 15.5 16.0625 L 11.71875 12.28125 L 11 11.59375 L 10.28125 12.28125 L 5 17.5625 Z M 22.5 9 C 21.132813 9 20 10.132813 20 11.5 C 20 12.867188 21.132813 14 22.5 14 C 23.867188 14 25 12.867188 25 11.5 C 25 10.132813 23.867188 9 22.5 9 Z M 22.5 11 C 22.789063 11 23 11.210938 23 11.5 C 23 11.789063 22.789063 12 22.5 12 C 22.210938 12 22 11.789063 22 11.5 C 22 11.210938 22.210938 11 22.5 11 Z M 11 14.4375 L 14.0625 17.5 L 7.5625 24 L 5 24 L 5 20.4375 Z M 18.5 15.9375 L 26.5625 24 L 10.4375 24 Z" stroke-linecap="round" />
                </g>
              </svg>
            </div>
            <div class="flex-1">
              <h2 class="text-2xl font-bold text-[#f5f5f7] mb-1 group-hover:text-white">Splash Art</h2>
              <p class="text-sm text-[#abcde3] mb-3">Identify champions from zoomed-in splash art details.</p>
              <div class="flex items-center justify-between">
                <% if (flags.isSplashComplete) { %>
                <span class="completion-badge">Completed</span>
                <% } %>
              </div>
            </div>
          </div>
        </div>
      </a>
    </div>

    <!-- Stats Section -->
    <!-- <div class="mt-8 px-4">
      <h2 class="text-xl font-semibold text-[#abcde3] mb-4 text-center">Your Stats</h2>
      <div class="grid grid-cols-2 md:grid-cols-5 gap-4">
        <div class="stat-card">
          <div class="text-3xl font-bold text-[#f5f5f7]" id="completed-count">0</div>
          <div class="text-xs text-[#abcde3]">Completed</div>
        </div>
        <div class="stat-card">
          <div class="text-3xl font-bold text-[#f5f5f7]" id="total-guesses">0</div>
          <div class="text-xs text-[#abcde3]">Total Guesses</div>
        </div>
        <div class="stat-card">
          <div class="text-3xl font-bold text-[#f5f5f7]" id="accuracy">0%</div>
          <div class="text-xs text-[#abcde3]">Accuracy</div>
        </div>
        <div class="stat-card">
          <div class="text-3xl font-bold text-[#f5f5f7]" id="best-streak">0</div>
          <div class="text-xs text-[#abcde3]">Best Streak</div>
        </div>
        <div class="stat-card md:col-span-1 col-span-2">
          <div class="text-3xl font-bold text-[#f5f5f7]" id="champions-guessed">0</div>
          <div class="text-xs text-[#abcde3]">Champions</div>
        </div>
      </div>
    </div> -->

  </div>
</section>

<style>

</style>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Calculate completion percentage
    const modes = ['classic', 'quote', 'ability', 'splash', 'emoji'];
    const completedModes = modes.filter(mode => {
      const link = document.querySelector(`.game-card-link[data-mode="${mode}"]`);
      return link && link.querySelector('.completion-badge');
    });

    const completedCount = completedModes.length;
    const totalModes = modes.length;
    const completionPercentage = Math.round((completedCount / totalModes) * 100);

    // Update progress bar and text
    document.getElementById('progress-bar').style.width = `${completionPercentage}%`;
    document.getElementById('progress-percentage').textContent = `${completionPercentage}%`;
    /* document.getElementById('completed-count').textContent = completedCount; */

    // Animation for cards on page load
    const cards = document.querySelectorAll('.game-card');
    cards.forEach((card, index) => {
      setTimeout(() => {
        card.style.opacity = '0';
        card.style.transform = 'translateY(20px)';

        setTimeout(() => {
          card.style.transition = 'all 0.5s cubic-bezier(0.2, 0.8, 0.2, 1)';
          card.style.opacity = '1';
          card.style.transform = 'translateY(0)';
        }, 100);
      }, index * 100);
    });

    /* setTimeout(() => {
      document.getElementById('total-guesses').textContent = '42';
      document.getElementById('accuracy').textContent = '68%';
      document.getElementById('best-streak').textContent = '5';
      document.getElementById('champions-guessed').textContent = '28';

      animateNumbers();
    }, 500); */
  });

  function animateNumbers() {
    const statElements = document.querySelectorAll('.stat-card .text-3xl');

    statElements.forEach(element => {
      const finalValue = element.textContent;
      let startValue = 0;

      // Handle percentage values
      const isPercentage = finalValue.includes('%');
      const targetValue = parseInt(finalValue);

      const duration = 1500;
      const frameRate = 30;
      const totalFrames = duration / (1000 / frameRate);
      let frame = 0;

      const counter = setInterval(() => {
        frame++;
        const progress = frame / totalFrames;
        const currentValue = Math.round(progress * targetValue);

        element.textContent = isPercentage ? `${currentValue}%` : currentValue;

        if (frame === totalFrames) {
          clearInterval(counter);
          element.textContent = finalValue;
        }
      }, 1000 / frameRate);
    });
  }
</script>